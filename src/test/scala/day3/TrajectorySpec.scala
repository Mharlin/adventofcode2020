package day3

import day3.Trajectory.Increment
import org.scalatest.flatspec.AnyFlatSpec
import org.scalatest.matchers.should.Matchers

class TrajectorySpec extends AnyFlatSpec with Matchers {
  val smallInput = """..##.......
                      |#...#...#..
                      |.#....#..#.
                      |..#.#...#.#
                      |.#...##..#.
                      |..#.##.....
                      |.#.#.#....#
                      |.#........#
                      |#.##...#...
                      |#...##....#
                      |.#..#...#.#""".stripMargin

  val largeInput = """.......#..#....#...#...#......#
                     |..##..#...##.###.#..#.....#.#..
                     |#..#.#....#......#..#.........#
                     |.#..##...#........#....#..#..#.
                     |#.#.#....###...#........#.....#
                     |.#...#.#.##.#.##...#.#.........
                     |####......#.......###.##.#.....
                     |..#...........#...#.#.#........
                     |.#.......#....###.####..#......
                     |...##........#....##.......##..
                     |.###......##.#......##....#.#.#
                     |........#.#......##...#......#.
                     |#....##.#..#...#.......#.......
                     |.#..##........##.........#....#
                     |.#..#..#...#....#.#......#.#...
                     |..#.#......##.#.......#....##..
                     |......##......#.#..##.#..#...#.
                     |.....##.......#.#....#.#.......
                     |........#.....#.....#..###.#...
                     |#........#..#.....#...#.#.#..#.
                     |.#..#.....#...#........#.....#.
                     |.#.#.....#.....#...#...........
                     |.....#.#..#..#...#..#..#..##..#
                     |##.#...#....#..#.##..#.....#.#.
                     |#.......####......#..#.#....#..
                     |......#.#...####.........#.#..#
                     |.#.........#..#.#...#..........
                     |...#####.#....#.#..#......#.#.#
                     |##....#.###....##...##..#.....#
                     |...........####.##.#....##.##..
                     |#.#.#..........#.#..##.#.######
                     |##...#..#...........###..#....#
                     |.#.#.#...##..........##.#...#..
                     |...#.#........#..##...#....#...
                     |......#..#...#..##....#.......#
                     |.#..#.......#..#......##....##.
                     |.......#.......#........#..##..
                     |...#...#...#.##......#.##.#....
                     |.........#.........#.#.#.##....
                     |..#...................#....#..#
                     |.........#..#.....#.#...#....#.
                     |#.#.#...#........#..###.#......
                     |#.#.#.####......##...#...#....#
                     |#...........##..#.#.#....#..#..
                     |........#..#.#...........##.#.#
                     |.#.........#...........#..#....
                     |#............##.#..#....##...##
                     |.#....##..#.#....#.......#..#..
                     |..#.#...#.#......####.......#..
                     |...#.#.......###......#.....#..
                     |#......#.......#.#...#.#..##...
                     |...#.....#...##.#.....#.#......
                     |#.#.#............#..#......#..#
                     |....#...#...##.##.##...##.#....
                     |..##........#..#........#...##.
                     |.......#..#...#.........#.....#
                     |...........#.#......#...#......
                     |...##..##..##..###..#..#..#..#.
                     |#..##.......##..#....#....#.#..
                     |#.#.##.#..##.....#....#.#......
                     |....#..##......#.#..#....#....#
                     |.#.#.........##...#......##.##.
                     |##...........#..#.....#.###....
                     |.#.###........#...#....##..#...
                     |......##.....#.................
                     |.#.##..#.#.......#......#.#.#..
                     |.#...#....#.##..........##.##..
                     |#...##......####.#....#....#...
                     |.#...#.##.#.#.....#...#........
                     |.#................#.##.#.###...
                     |...#.#..#.#.....##.....##....#.
                     |..##.#..#..##.....#....#...#.##
                     |........###.##..#..###.....#..#
                     |..##.....#.......#.#...##......
                     |#.#..###...##.###.##.#..#...#..
                     |#..#..#.#...#....#...##.....#.#
                     |#..................#........#..
                     |#.....#.......#.##....##....#..
                     |...#.............#.....#...#...
                     |...#...#.##..##.....#........#.
                     |.......#........##....###..##..
                     |.#....#....#.#..#......#....#.#
                     |..........#..#.#.....##...#.##.
                     |.#...##.#...........#.#.......#
                     |..#.##.....#.###.#.............
                     |..#....###..........#.#.#......
                     |#.....#.####..#.#......#..#.#.#
                     |...#........#..#...............
                     |.###.#.##.....#.#...........#..
                     |..#....#..#....#..##....#......
                     |......#..#.....#.#.##.......#.#
                     |###..#...#.#..#....#..##.###..#
                     |.#....##.###........##...##.#.#
                     |........##..##.#....##..#....#.
                     |...#..#....#.#....#...#...##...
                     |#.....#......#.##........#....#
                     |....#....###.##...#.#.##....#..
                     |......#.##..#.#..........#...#.
                     |...........#...#....##...#....#
                     |......#.#.........#....#.#.#...
                     |.###..........#.###.##....#...#
                     |...##.......#......#....#....#.
                     |#..#...#.#..####...#......#..#.
                     |....##..#.#.........#..........
                     |.##.###.##....##.####....#...#.
                     |..##.......#........#...#..#...
                     |....#####..........###....#....
                     |.#.#..#.#.#....#..#............
                     |........#.....#....#.......##..
                     |...........##....##..##.....##.
                     |..###........#.#.#..#....##...#
                     |.....#...........##......#..#..
                     |...##........#.##.#......##..#.
                     |##..#....#............##..#..#.
                     |.#.....#...##.##..............#
                     |#..##........#...#...#......##.
                     |......##.....#.......####.##..#
                     |...#.#....#...#..#.............
                     |..#...#..##.###..#..#.......##.
                     |##....###.......#...#..#.......
                     |#..#.....###.....#.#.........#.
                     |#.#....#.............#...#.....
                     |..#.#.##..........#.....##.#...
                     |.....##......#..#..#.....#..#..
                     |##.#..#..#.##......###....#..#.
                     |...#............##...#..##.....
                     |.#..#....#.........#......#.##.
                     |.##.##...#..............#..#.##
                     |...#....#...###...#...#....#..#
                     |..#...#..####..#....#.#...##..#
                     |..............##.##.......##...
                     |..##.#..##...........#.#.#...#.
                     |..................##.####.###..
                     |.#...........#.......#......#..
                     |.#.#.#...#....#.........##...##
                     |....#..........#.#....#.#.....#
                     |..........#.#..........#.#.....
                     |...........#.....#.#......#....
                     |........#..#.#.#.#.............
                     |...###...##...##..####.##......
                     |.#..#......###.....#...#.....#.
                     |.........##............#.#.....
                     |#.#..#.#.#....###.#.#..#..#..##
                     |..........#...#.##.#..#..#....#
                     |#..#.......##....#..##........#
                     |##.#...#....##.............#...
                     |....#........#......##..#..#.##
                     |.................#.#.#.#.#.....
                     |...........#.#.....#.......#...
                     |#.......#.......#............#.
                     |....#...........#.#.##.....#..#
                     |#...#.....#....#..##...#.......
                     |..#.....#.....#.##.##....#.....
                     |.#.#..#...#..#..##.....##..#...
                     |.#.#....#.........####.........
                     |#...#..####.....#...#..##......
                     |..#...##.#.....#...#.....##....
                     |.#...#.....#.#.#......#.......#
                     |..#.....##.#..#.#...##.........
                     |##.#...#..#....#....#.##.##...#
                     |.#..#....#..##.#.......#..#....
                     |...##.#......#...###.......#...
                     |...#..#.........##.####........
                     |#.#..#..##...........#..#......
                     |.#...#.#......#.#..........#...
                     |...###...#.......#.....#.#...##
                     |..#....#.#.##..........##...#..
                     |.....###.........#.....#..##..#
                     |.......##.....#.#.....#.#..##..
                     |.#.#.###..##.......##...#......
                     |......#.....#................##
                     |.#......##..##.#.#...#...#...##
                     |.#...#......#.......#.#........
                     |.#..........###...#..#...#.....
                     |.........##.....#.#..#..#.#...#
                     |#...#...#.........#..#..#....#.
                     |###.......#.#.....#....##......
                     |.#..#......#..#...........#..#.
                     |..##....##..##...#......#......
                     |.#........#....#...#....#.....#
                     |.#.......#...#...#..##.#.#..#..
                     |#...#........#.##.....#.....#..
                     |#..##.....#..........#...#...##
                     |............#...............#..
                     |.#.##...#.....#.#..#..#..#.....
                     |.#.#.#...#........#....#...##..
                     |##......#.....#.###.#...#.#..#.
                     |.........##..#..#.#...#...#...#
                     |#...#.#....#..#..#.....#.......
                     |.......#.###...#.............#.
                     |..#.....#.#.#..###.#....#.....#
                     |....#...#.#....#.#..........#..
                     |..#......#.###.#.#..#.....#...#
                     |#............#..##...##......#.
                     |#...........#..#....#.###..###.
                     |.#.##.#.#.......#.............#
                     |..............#................
                     |..#.#.....#.....#...#......#...
                     |.#.#.#..#..#.#...........##....
                     |.....##.#......#..#.##....#....
                     |.......##..#.#.#..#............
                     |..#.....#.....#.###..#.....#.#.
                     |......##.....#..##.#...#.....#.
                     |...#...#....#..#..#........#...
                     |..#.##..#....#.........#.#..#..
                     |#....#.....###.....#......#....
                     |##.....#..#..##.........#.##.##
                     |.#.#....#.#..........#.........
                     |.##.#...#..#.......#.##...#....
                     |...#...#.....#....#...#.#..#...
                     |.....#....#.....#.....#.#......
                     |...........#.#.......#.......#.
                     |.........##.###.##........#....
                     |#..##.....#...#.#..............
                     |.#...#....##........#.#..#....#
                     |..#...#........#...#..#.##.#..#
                     |........#...#.....##.#.#....#.#
                     |#..#.......###.#....#.#.#......
                     |.......#...##....#...#..##..#..
                     |.....##........#.#.#..#....##..
                     |.#....#..#.#...........#......#
                     |...##....#.##.....##.......#...
                     |.##..#..#....#.#....#..#....##.
                     |..#....#.....###.......#..##..#
                     |....#.......#....##..#....#..##
                     |....#......##..#....#.#...#.#..
                     |.##.#......##..................
                     |##.#....#........#..#..#...##.#
                     |.......#..#.#...##.....#.#.....
                     |..##.#...........#.#.#..#.#.#..
                     |.....#....#......#..#.......#..
                     |#.#...#.####..##.......#..##...
                     |...#....#.....#.##.#..#.##..#..
                     |.#.......#......##........##.#.
                     |.......#.#...#..#...#..##.#....
                     |.#....#........#.#.....##..#..#
                     |#..#.....#..#.............#...#
                     |#...#....#..#...###..#...#.#...
                     |.#..#.....#..........#..##.####
                     |#.#.#.#.##.#.#.....##.#........
                     |...#....##....#...#..##.......#
                     |..##.##.#.#........#..........#
                     |..###........###..#..........#.
                     |...#......#..##.#........#..#..
                     |#.#.#..#........#..#..........#
                     |...#........#..##.#...#.###....
                     |##......#.####.#....#......#...
                     |.#..#......#................#..
                     |#.#........#.#.....##.....##...
                     |#...............#..#.......#.#.
                     |.##..#...........##..#..#.#....
                     |#......#.#.......#.#.#.##..#.##
                     |.....##.#..###.............##..
                     |....##.........#..#...#........
                     |.....#.....#.#.#..#.#..........
                     |#.........#....##.#.##.....#..#
                     |.#.........#......#.#.##.#.#...
                     |##.........#.....#..#.#..#.##.#
                     |....#......##...#.....#..#..###
                     |..#..............#...#..####...
                     |#....#...##.#.......#...#..#...
                     |#.......###.#.#.......#.......#
                     |...##....#.#...........#...###.
                     |...........#..#.#.....#..##..#.
                     |..#.........#..###..#.....#...#
                     |..#.#.....#.#.#...#.#.#......#.
                     |........#.....#.#......##....##
                     |##.#.#...#.#........#.....#...#
                     |........#....#...............#.
                     |##.###......####...#####..#....
                     |...##...#..#....#........#...#.
                     |...###.#..................##.#.
                     |##.#.......###.......#...#.#...
                     |....#..#.#...#...#....#.#.#..##
                     |....#...........#..#...........
                     |#..#.#..#...#...#..#...........
                     |...#...#.#....#..#....#........
                     |#....#.......#.##........#..#..
                     |.....#...#..#................#.
                     |#......#.......#..........##..#
                     |.#....#.#......#.#...#....##..#
                     |...#.##...#......#.#...##...##.
                     |..#...#..##...#...#....#.......
                     |.....#....#.#.#..........#.#...
                     |...#...#..#....#..#.#..........
                     |......#.#..........##.......#..
                     |.#...##.#.#...#..##..#...#.....
                     |..#..#.........#........#.#.#..
                     |#.#..##..#.....##......#.....#.
                     |#..#.....#.#....#...#.#....#.#.
                     |......#........##.#..#...#.....
                     |...#.##.#.#......#.#..##...#..#
                     |....#..###..#..#.....###....##.
                     |.....#...#.#.....#..........#.#
                     |.#...##..##.....#..#...#.#.#...
                     |.##.#......##...##..#...#.....#
                     |.#.##....#...#.##.#.#...#.#...#
                     |....#.#...#....###.#.....#.....
                     |#.....####................#..#.
                     |....#.....#...#.#.......##.#...
                     |.#...##.#...#..#...........#.#.
                     |..#####..#.#...#...##........#.
                     |...#...##........#...#.#....###
                     |........#.#.#..#.....#.......#.
                     |...#...#..##............##.....
                     |#.#..###....###.#...#.#...##.##
                     |..#.##...#......#..#.........##
                     |.##..#..#.....#..#.........#.#.
                     |.#..#.#....#.##...#..#.##....##
                     |..#...#.#...##.#.#...#...#....#
                     |#..........#.......##..##....#.
                     |#...###.#......#....#.........#
                     |#.....#...##.......##....##....
                     |.##.#..#.##......#.##....#..#..
                     |............#.#....##.#..#....#
                     |.#.........##.##...#....#.....#
                     |##....##..#..#....##...#.....##
                     |...#.....#...........#.....##..
                     |......#...#.........#.......#..
                     |............#...##.#.....#.#.#.
                     |.#........##..........#.....#.#
                     |.###.........#.....#.##...#....
                     |.##..#...##...#..#..#.##.......""".stripMargin

  "Trajectory" should "count the trees in route with example data" in {
    Trajectory.countTreesOnRoute(smallInput, Seq(Increment(1, 3))) shouldEqual 7
  }

  "Trajectory" should "count the trees in route with large data set" in {
    Trajectory.countTreesOnRoute(largeInput, Seq(Increment(1, 3))) shouldEqual 234
  }

  "Trajectory" should "count the trees in on different slopes with example data" in {
    Trajectory.countTreesOnRoute(smallInput, Seq(
      Increment(1, 1),
      Increment(1, 3),
      Increment(1, 5),
      Increment(1, 7),
      Increment(2, 1)
    )) shouldEqual 336
  }

  "Trajectory" should "count the trees in on different slopes with large data set" in {
    Trajectory.countTreesOnRoute(largeInput, Seq(
      Increment(1, 1),
      Increment(1, 3),
      Increment(1, 5),
      Increment(1, 7),
      Increment(2, 1)
    )) shouldEqual 5.813773056E9
  }
}
